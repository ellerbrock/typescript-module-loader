<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Typescript Module Loader by ellerbrock</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Typescript Module Loader</h1>
      <h2 class="project-tagline">dynamically appends JS and CSS files to the document - thats it :-)</h2>
      <a href="https://github.com/ellerbrock/typescript-module-loader" class="btn">View on GitHub</a>
      <a href="https://github.com/ellerbrock/typescript-module-loader/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/ellerbrock/typescript-module-loader/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="typescript-module-loader---" class="anchor" href="#typescript-module-loader---" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>TypeScript Module Loader <a href="https://github.com/ellerbrock/typescript-badges/"><img src="https://badges.frapsoft.com/typescript/code/typescript.png?v=100" alt="TypeScript"></a> <a href="https://github.com/ellerbrock/open-source-badge/"><img src="https://badges.frapsoft.com/os/v1/open-source.svg?v=102" alt="Open Source Love"></a> <a href="https://gitter.im/frapsoft/frapsoft/"><img src="https://badges.gitter.im/frapsoft/frapsoft.svg" alt="Gitter Chat"></a>
</h1>

<p>Small script to append dynamically Javascript and CSS to the document.<br>
I used this with Angular 1.x to load modules on runtime and append their Stylesheet definitions while developing.</p>

<p>A better way to do this is to make use of Module Loaders &amp; Bundler like <a href="https://github.com/webpack/webpack">Webpack</a> for production.</p>

<div class="highlight highlight-source-js"><pre><span class="pl-c">/**</span>
<span class="pl-c"> * <span class="pl-k">@author</span>        Maik Ellerbrock</span>
<span class="pl-c"> * @link          https://github.com/ellerbrock</span>
<span class="pl-c"> * <span class="pl-k">@version</span>       1.0.1</span>
<span class="pl-c"> * <span class="pl-k">@license</span>       MIT</span>
<span class="pl-c"> * <span class="pl-k">@description</span>   adds CSS files to Header and Javascript files to Footer</span>
<span class="pl-c"> */</span>

<span class="pl-s"><span class="pl-pds">'</span>use strict<span class="pl-pds">'</span></span>;

<span class="pl-c">/**</span>
<span class="pl-c"> *  extract suffix from given filename</span>
<span class="pl-c"> *</span>
<span class="pl-c"> *  <span class="pl-k">@param</span> <span class="pl-en">{string}</span> <span class="pl-smi">fileName</span> - to extract suffix</span>
<span class="pl-c"> *  <span class="pl-k">@returns</span> <span class="pl-en">{string}</span> - suffix</span>
<span class="pl-c"> */</span>
<span class="pl-k">function</span> <span class="pl-en">getFileSuffix</span>(<span class="pl-smi">fileName</span><span class="pl-k">:</span> <span class="pl-smi">string</span>): string {
  <span class="pl-k">return</span> <span class="pl-smi">fileName</span>.<span class="pl-c1">substr</span>(<span class="pl-smi">fileName</span>.<span class="pl-c1">lastIndexOf</span>(<span class="pl-s"><span class="pl-pds">'</span>.<span class="pl-pds">'</span></span>) <span class="pl-k">+</span> <span class="pl-c1">1</span>).<span class="pl-c1">toLowerCase</span>();
}

<span class="pl-c">/**</span>
<span class="pl-c"> *  creates an link element and append href to it</span>
<span class="pl-c"> *</span>
<span class="pl-c"> *  <span class="pl-k">@param</span> <span class="pl-en">{string}</span> <span class="pl-smi">fileName</span> - CSS filename</span>
<span class="pl-c"> *  <span class="pl-k">@returns</span> <span class="pl-en">{HTMLLinkElement}</span> - link element</span>
<span class="pl-c"> */</span>
<span class="pl-k">function</span> <span class="pl-en">createLinkElement</span>(<span class="pl-smi">fileName</span><span class="pl-k">:</span> <span class="pl-smi">string</span>): HTMLLinkElement {
  <span class="pl-k">let</span> eCSS <span class="pl-k">=</span> <span class="pl-c1">document</span>.<span class="pl-c1">createElement</span>(<span class="pl-s"><span class="pl-pds">'</span>link<span class="pl-pds">'</span></span>);
  <span class="pl-smi">eCSS</span>.<span class="pl-c1">rel</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>stylesheet<span class="pl-pds">"</span></span>;
  <span class="pl-smi">eCSS</span>.<span class="pl-c1">href</span> <span class="pl-k">=</span> fileName;
  <span class="pl-k">return</span> eCSS;
}

<span class="pl-c">/**</span>
<span class="pl-c"> *  creates an script element and append src to it</span>
<span class="pl-c"> *</span>
<span class="pl-c"> *  <span class="pl-k">@param</span> <span class="pl-en">{string}</span> <span class="pl-smi">fileName</span> - Javascript filename</span>
<span class="pl-c"> *  <span class="pl-k">@returns</span> <span class="pl-en">{HTMLScriptElement}</span> - script element</span>
<span class="pl-c"> */</span>
<span class="pl-k">function</span> <span class="pl-en">createScriptElement</span>(<span class="pl-smi">fileName</span><span class="pl-k">:</span> <span class="pl-smi">string</span>): HTMLScriptElement {
  <span class="pl-k">let</span> eJS <span class="pl-k">=</span> <span class="pl-c1">document</span>.<span class="pl-c1">createElement</span>(<span class="pl-s"><span class="pl-pds">'</span>script<span class="pl-pds">'</span></span>);
  <span class="pl-smi">eJS</span>.<span class="pl-smi">src</span> <span class="pl-k">=</span> fileName;
  <span class="pl-k">return</span> eJS;
}


<span class="pl-c">/**</span>
<span class="pl-c"> *  append JS / CSS files to the document (CSS =&gt; Head , JS =&gt; Footer)</span>
<span class="pl-c"> *</span>
<span class="pl-c"> * <span class="pl-k">@param</span> fileName - to attach</span>
<span class="pl-c"> * <span class="pl-k">@param</span> debug - write HTML comment for debugging / information</span>
<span class="pl-c"> * <span class="pl-k">@returns</span> <span class="pl-en">{boolean}</span></span>
<span class="pl-c"> */</span>
<span class="pl-k">function</span> <span class="pl-en">appendFiles</span>(<span class="pl-smi">fileName</span><span class="pl-k">:</span> <span class="pl-smi">string</span>, <span class="pl-smi">debug</span> <span class="pl-k">=</span> <span class="pl-c1">false</span>): boolean {
  <span class="pl-k">let</span> fileType, eFile, eTarget, location;
  fileType <span class="pl-k">=</span> <span class="pl-en">getFileSuffix</span>(fileName);

  <span class="pl-k">if</span> (fileType <span class="pl-k">===</span> <span class="pl-s"><span class="pl-pds">'</span>css<span class="pl-pds">'</span></span>) {
    eFile <span class="pl-k">=</span> <span class="pl-en">createLinkElement</span>(fileName);
    location <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>head<span class="pl-pds">'</span></span>;
  }
  <span class="pl-k">else</span> <span class="pl-k">if</span> (fileType <span class="pl-k">===</span> <span class="pl-s"><span class="pl-pds">'</span>js<span class="pl-pds">'</span></span>) {
    eFile <span class="pl-k">=</span> <span class="pl-en">createScriptElement</span>(fileName);
    location <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>body<span class="pl-pds">'</span></span>;
  }
  <span class="pl-k">else</span> {
    <span class="pl-en">console</span>.<span class="pl-c1">error</span>(<span class="pl-s"><span class="pl-pds">'</span>ERROR - filetype not valid! Supported formats: CSS / JS<span class="pl-pds">'</span></span>);
    <span class="pl-k">return</span> <span class="pl-c1">false</span>;
  }

  eTarget <span class="pl-k">=</span> <span class="pl-c1">document</span>.<span class="pl-c1">getElementsByTagName</span>(location)[<span class="pl-c1">0</span>];

  <span class="pl-k">if</span> (debug) {
    <span class="pl-k">let</span> eComment <span class="pl-k">=</span> <span class="pl-c1">document</span>.<span class="pl-c1">createComment</span>(<span class="pl-s"><span class="pl-pds">'</span> dynamically added <span class="pl-pds">'</span></span> <span class="pl-k">+</span> fileType <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">'</span> file: <span class="pl-pds">'</span></span> <span class="pl-k">+</span> fileName <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">'</span> <span class="pl-pds">'</span></span>);
    <span class="pl-smi">eTarget</span>.<span class="pl-c1">appendChild</span>(eComment);
  }

  <span class="pl-smi">eTarget</span>.<span class="pl-c1">appendChild</span>(eFile);
  <span class="pl-k">return</span> <span class="pl-c1">true</span>;
}</pre></div>

<h1>
<a id="contact--social-media" class="anchor" href="#contact--social-media" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Contact / Social Media</h1>

<p><em>Get the latest News about Web Development, Open Source, Tooling, Server &amp; Security</em></p>

<p><a href="https://twitter.com/frapsoft/"><img src="https://github.frapsoft.com/social/twitter.png" alt="Twitter"></a> <a href="https://www.facebook.com/frapsoft/"><img src="https://github.frapsoft.com/social/facebook.png" alt="Facebook"></a> <a href="https://plus.google.com/116540931335841862774"><img src="https://github.frapsoft.com/social/google-plus.png" alt="Google+"></a> <a href="https://gitter.im/frapsoft/frapsoft/"><img src="https://github.frapsoft.com/social/gitter.png" alt="Gitter"></a> <a href="https://github.com/ellerbrock/"><img src="https://github.frapsoft.com/social/github.png" alt="Github"></a></p>

<h1>
<a id="development-by" class="anchor" href="#development-by" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Development by</h1>

<p>Developer / Author: <a href="https://github.com/ellerbrock/">Maik Ellerbrock</a><br> Company: <a href="https://github.com/frapsoft/">Frapsoft</a></p>

<h3>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>License</h3>

<p>Copyright (c) 2016 <a href="https://github.com/ellerbrock/">Maik Ellerbrock</a>  </p>

<p><a href="https://opensource.org/licenses/mit-license.php"><img src="https://badges.frapsoft.com/os/mit/mit-125x28.png?v=102" alt="MIT Licence"></a>  </p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/ellerbrock/typescript-module-loader">Typescript Module Loader</a> is maintained by <a href="https://github.com/ellerbrock">ellerbrock</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
